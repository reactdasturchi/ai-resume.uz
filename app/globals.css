@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 36 25% 97%;
    --foreground: 24 10% 12%;
    --card: 0 0% 100%;
    --card-foreground: 24 10% 12%;
    --popover: 0 0% 100%;
    --popover-foreground: 24 10% 12%;
    --primary: 12 65% 45%;
    --primary-foreground: 0 0% 100%;
    --secondary: 36 20% 92%;
    --secondary-foreground: 24 10% 18%;
    --muted: 36 15% 92%;
    --muted-foreground: 24 8% 40%;
    --accent: 36 25% 90%;
    --accent-foreground: 24 10% 18%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 24 15% 88%;
    --input: 24 15% 88%;
    --ring: 12 65% 45%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 24 12% 8%;
    --foreground: 36 20% 96%;
    --card: 24 10% 11%;
    --card-foreground: 36 20% 96%;
    --popover: 24 10% 11%;
    --popover-foreground: 36 20% 96%;
    --primary: 12 70% 55%;
    --primary-foreground: 24 12% 8%;
    --secondary: 24 12% 16%;
    --secondary-foreground: 36 20% 96%;
    --muted: 24 12% 16%;
    --muted-foreground: 36 15% 60%;
    --accent: 24 12% 18%;
    --accent-foreground: 36 20% 96%;
    --destructive: 0 62% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 24 12% 18%;
    --input: 24 12% 18%;
    --ring: 12 70% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    @apply bg-background text-foreground;
  }
  body {
    @apply min-h-screen bg-background text-foreground font-sans antialiased;
  }
  /* Butun sahifa dark/light: main va section ham mavzuga mos */
  main {
    @apply bg-transparent text-foreground;
  }
  .dark main,
  .dark section,
  .dark [data-section] {
    @apply bg-transparent;
  }
}

/* Stagger animation delays */
.stagger-1 {
  animation-delay: 0.05s;
}
.stagger-2 {
  animation-delay: 0.1s;
}
.stagger-3 {
  animation-delay: 0.15s;
}
.stagger-4 {
  animation-delay: 0.2s;
}
.stagger-5 {
  animation-delay: 0.25s;
}
.stagger-6 {
  animation-delay: 0.3s;
}

.animation-fill-forwards {
  animation-fill-mode: forwards;
}

/* Page background: gradient + grain (light) — asosiy fon har doim mavzu rangida */
.grain {
  background-color: hsl(var(--background));
  background-image:
    radial-gradient(ellipse 120% 80% at 50% -20%, hsl(12 65% 45% / 0.06), transparent 50%),
    radial-gradient(ellipse 80% 50% at 90% 60%, hsl(36 40% 90%), transparent 45%),
    radial-gradient(ellipse 60% 40% at 10% 80%, hsl(12 30% 92%), transparent 40%);
}

.grain::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}

/* Dark: sahifa fon — butunlay qora ton */
.dark .grain {
  background-color: hsl(var(--background));
  background-image:
    radial-gradient(ellipse 120% 80% at 50% -20%, hsl(12 70% 55% / 0.08), transparent 50%),
    radial-gradient(ellipse 80% 50% at 90% 60%, hsl(24 12% 14%), transparent 45%),
    radial-gradient(ellipse 60% 40% at 10% 80%, hsl(24 12% 12%), transparent 40%);
}

.dark .grain::before {
  opacity: 0.06;
}

/* Hero: zur fon — chuqur gradient mesh + yumshoq geometriya + vignette (light) */
.hero-bg {
  background-color: hsl(var(--background));
  background-image:
    /* Vignette: qorong‘u burchaklar */
    radial-gradient(ellipse 150% 120% at 50% 50%, transparent 40%, hsl(24 10% 12% / 0.03) 100%),
    /* Yuqori markaz: primary nur (katta, yumshoq) */
    radial-gradient(ellipse 100% 70% at 50% -15%, hsl(12 65% 45% / 0.18), hsl(12 55% 55% / 0.06) 45%, transparent 70%),
    /* Chap yuqori: ikkinchi blob */
    radial-gradient(ellipse 80% 60% at 15% 20%, hsl(12 50% 50% / 0.12), transparent 55%),
    /* O‘ng past: issiq ton */
    radial-gradient(ellipse 70% 50% at 85% 85%, hsl(36 35% 88% / 0.9), hsl(12 30% 92% / 0.5) 50%, transparent 70%),
    /* Past markaz: yengil lift */
    radial-gradient(ellipse 90% 40% at 50% 100%, hsl(12 40% 94% / 0.8), transparent 60%),
    /* Asosiy issiq fon */
    linear-gradient(180deg, hsl(36 28% 97%) 0%, hsl(36 22% 96%) 50%, hsl(30 25% 95%) 100%);
}

.hero-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='30' cy='30' r='0.8' fill='hsl(12 65% 45%)' fill-opacity='0.06'/%3E%3C/svg%3E");
  pointer-events: none;
  animation: hero-dots-drift 25s ease-in-out infinite;
}

.hero-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events: none;
}

@keyframes hero-dots-drift {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(2%, 1%) scale(1.02); }
  66% { transform: translate(-1%, 2%) scale(0.98); }
}

/* Dark: hero fon — qora */
.dark .hero-bg {
  background-color: hsl(var(--background));
  background-image:
    radial-gradient(ellipse 150% 120% at 50% 50%, transparent 40%, hsl(0 0% 0% / 0.15) 100%),
    radial-gradient(ellipse 100% 70% at 50% -15%, hsl(12 70% 55% / 0.2), hsl(12 60% 50% / 0.06) 45%, transparent 70%),
    radial-gradient(ellipse 80% 60% at 15% 20%, hsl(12 65% 50% / 0.12), transparent 55%),
    radial-gradient(ellipse 70% 50% at 85% 85%, hsl(24 12% 14% / 0.9), transparent 70%),
    radial-gradient(ellipse 90% 40% at 50% 100%, hsl(24 12% 10% / 0.8), transparent 60%),
    linear-gradient(180deg, hsl(24 12% 9%) 0%, hsl(24 12% 8%) 50%, hsl(24 14% 7%) 100%);
}

.dark .hero-bg::before {
  opacity: 0.12;
}

/* Focus ring transition for inputs */
.input-focus-ring {
  transition:
    box-shadow 0.2s ease,
    border-color 0.2s ease;
}
.input-focus-ring:focus-within {
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.2);
}

/* Button hover lift */
.btn-lift {
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease;
}
.btn-lift:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px -8px hsl(var(--primary) / 0.4);
}
.btn-lift:active:not(:disabled) {
  transform: translateY(0);
}

/* Next.js portal: avoid off-screen position (top=-1681px) so Dialog/Select render correctly */
nextjs-portal {
  position: fixed !important;
  inset: 0 !important;
  left: 0 !important;
  top: 0 !important;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none;
}
nextjs-portal > * {
  pointer-events: auto;
}

/* Reduced motion: kam animatsiya talab qiluvchi foydalanuvchilar uchun */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
